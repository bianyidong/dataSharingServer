<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ztgeo.workbench.mapper.NoticeRecordMapper">

    <!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.ztgeo.workbench.entity.NoticeRecord" id="noticeRecordMap">
        <result property="recordId" column="record_id"/>
        <result property="senderId" column="sender_id"/>
        <result property="receiverId" column="receiver_id"/>
        <result property="receiverUrl" column="receiver_url"/>
        <result property="receiverUseName" column="receiver_usename"/>
        <result property="receiverName" column="receiver_name"/>
        <result property="typedesc" column="typedesc"/>
        <result property="status" column="status"/>
        <result property="sendTime" column="send_time"/>
        <result property="count" column="count"/>
        <result property="requestData" column="request_data"/>
    </resultMap>
    <select id="getNotAllApiBaseInfo" resultMap="noticeRecordMap">
        SELECT
        nr.record_id,
        nr.receiver_name,
        nr.receiver_url,
        nr.typedesc,
        nr.send_time,
        nr.`status`,
        nr.request_data
        FROM
        notice_record nr
        INNER JOIN user_key_info uki ON nr.sender_id = uki.user_identity_id
        WHERE
        uki.user_real_id=#{userId}
        <if test="startTime!=null and startTime!='' and endTime!=null and endTime!=''">
            and send_time &gt;=#{startTime} and send_time&lt;=#{endTime}
        </if>
        order by send_time desc
        limit #{pageNo},#{pageSize}
    </select>
    <!--查询单条通知信息-->
    <select id="getOneNoticeRecord" resultMap="noticeRecordMap">
        SELECT * from notice_record where record_id=#{recordId}
    </select>
</mapper>